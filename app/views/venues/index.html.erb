<h2>Find YourSpace</h2>

<% if flash[:notice] %>
  <div class="notice"><%= flash[:notice] %></div>
<% end %>

<p><%= form_tag('/venues', :method => :get) do |f| %>

<%= label_tag :zip_code %>
<%= text_field_tag :zip_code, @zip_code, :required => true %>

<%= label_tag :from %>
<%= date_field_tag :start_date, @start_date, :required => true %>

<%= label_tag :to %>
<%= date_field_tag :end_date, @end_date, :required => true %></p>

<p><%= label_tag :price_range %>
<input type="text" id="price-range-text" readonly style="border:0; color:#f6931f; font-weight:bold; background-color:transparent">
<div id="price-range"></div>
<%= hidden_field_tag :price_min_input, 0 %>
<%= hidden_field_tag :price_max_input, 0 %>

<br>
<%= submit_tag "Search" %></p>
<% end %>

<div id="search-results">
<h2>Search Results</h2>

<% @venues.each do |venue| %>

  <div id="venue-results">
  <%= link_to image_tag(venue.images.first.image.url(:small)), venue_path(venue) %><br>
  <strong><%= link_to venue.name, venue_path(venue) %></strong><br>
  Street: <%= venue.address %><br>
  City, Zip Code: <%= venue.city %>, <%= venue.zip_code %><br>
  <% venue.listings.each do |listing| %>
    Available Dates: <li><%= listing.available_start_date.strftime("%B %e, %Y") + " - " + listing.available_end_date.strftime("%B %e, %Y") %>
    <br>Price Per Day: $<%= listing.price.to_s %></li><br>
  <% end %>
  </div>

<% end %>

</div>
